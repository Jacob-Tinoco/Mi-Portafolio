document.addEventListener('DOMContentLoaded', function() {
    // Función para manejar el desplazamiento suave
    function smoothScroll(target, duration) {
        var targetElement = document.querySelector(target);
        var targetPosition = targetElement.getBoundingClientRect().top;
        var startPosition = window.pageYOffset;
        var startTime = null;

        function animation(currentTime) {
            if (startTime === null) startTime = currentTime;
            var timeElapsed = currentTime - startTime;
            var run = ease(timeElapsed, startPosition, targetPosition, duration);
            window.scrollTo(0, run);
            if (timeElapsed < duration) requestAnimationFrame(animation);
        }

        function ease(t, b, c, d) {
            t /= d / 2;
            if (t < 1) return c / 2 * t * t + b;
            t--;
            return -c / 2 * (t * (t - 2) - 1) + b;
        }

        requestAnimationFrame(animation);
    }

    // Añadir evento de clic a los enlaces de navegación
    var navLinks = document.querySelectorAll('nav a');
    navLinks.forEach(function(link) {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            var target = this.getAttribute('href');
            smoothScroll(target, 1000);
        });
    });

// Datos de los proyectos
     const projects = [
        {
            title: "Implementación de 3 dispositivos controller en una compuatodora",
            description: `Para este proyecto se realizó un algoritmo de seguimiento de 13 Gestos estaticos.
                          Posteriormente, se buscó ampliar el campo de visión utilizando 3 sesnores tipo LMC,
                          (no era usual poder usar más de 1 sensor en una misma computadora). Como última etapa,
                          se realizaron experimentos sometiendo a los sensores a diferentes pruebas de 
                          iluminación para buscar las condiciones óptimas para utilizarlos 
                          en máximas capacidades.`,
            image: "img/LMC-demostracion.gif",
            createdDate: "Oct-2023",
            updatedDate: "Ene-2024"
        },
        {
            title: "Control alternativo de UR3e",
            description: `Con un proyecto de desarrollo a cargo del Dr. Iván García y bajo la supervisión
                          del Ing. Gabriel Salinas en los laboratorios de LANITED, se creo un control del 
                          cobot UR3e de Universal robots dentro de una celda de Manufactura Avanzada`,
            image: "img/UR3e alternative-control.gif",
            createdDate: "Sep-2023-Feb-2024",
            updatedDate: "Feb-2024"
        },
        {
            title: "IA, Simulación de peces Betta",
            description:`La meta de esta IA es que aprenda el movieminto natural de peces Betta.
                         Como etapa inicial es la simulación de trayectoria de 50 objetos, escalando
                         el proyecto para simular peces Betta artificiales en una acuario`,
            image: "img/IA simulation.gif",
            createdDate: "Oct-2024",
            updatedDate: "Oct-2024"
        }
    ];

    // Función para cargar los proyectos
    function loadProjects() {
        const projectsGrid = document.querySelector('.projects-grid');
        projects.forEach(project => {
            const projectCard = document.createElement('div');
            projectCard.className = 'project-card';

            let mediaElement;
            if (project.video) {
                mediaElement = `<video src="${project.video}" class="project-image" controls></video>`;
            } else {
                mediaElement = `<img src="${project.image}" alt="${project.title}" class="project-image">`;
            }

            projectCard.innerHTML = `
                ${mediaElement}
                <div class="project-info">
                    <h3 class="project-title">${project.title}</h3>
                    <p class="project-description">${project.description}</p>
                    <div class="project-dates">
                        <span>Creado: ${formatDate(project.createdDate)}</span>
                        <span>Actualizado: ${formatDate(project.updatedDate)}</span>
                    </div>
                </div>
            `;
            projectsGrid.appendChild(projectCard);
        });
    }

    // Función para formatear fechas
    function formatDate(dateString) {
        const options = { year: 'numeric', month: 'long', day: 'numeric' };
        return new Date(dateString).toLocaleDateString('es-ES', options);
    }

    // Cargar proyectos
    loadProjects();
});
